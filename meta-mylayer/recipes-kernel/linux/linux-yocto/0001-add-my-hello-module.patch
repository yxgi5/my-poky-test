From e70236ed96ed416cb36f092e9a54f3332ab5f1e0 Mon Sep 17 00:00:00 2001
From: Andreas Zhang <yxgi5@163.com>
Date: Fri, 26 Sep 2025 21:13:43 +0800
Subject: [PATCH] add my hello module
Upstream-Status: Inappropriate [oe specific]

---
 drivers/char/Kconfig        |  2 ++
 drivers/char/Makefile       |  4 ++++
 drivers/char/hello/Kconfig  |  6 ++++++
 drivers/char/hello/Makefile |  2 ++
 drivers/char/hello/hello.c  | 21 +++++++++++++++++++++
 5 files changed, 35 insertions(+)
 create mode 100644 drivers/char/hello/Kconfig
 create mode 100644 drivers/char/hello/Makefile
 create mode 100644 drivers/char/hello/hello.c

diff --git a/drivers/char/Kconfig b/drivers/char/Kconfig
index 7c8dd0abcfdf..8eff70f6ded2 100644
--- a/drivers/char/Kconfig
+++ b/drivers/char/Kconfig
@@ -421,5 +421,7 @@ config ADI
 	  This feature is also known as MCD (Memory Corruption Detection)
 	  and SSM (Silicon Secured Memory).  Intended consumers of this
 	  driver include crash and makedumpfile.
+	  
+source "drivers/char/hello/Kconfig"
 
 endmenu
diff --git a/drivers/char/Makefile b/drivers/char/Makefile
index e9b360cdc99a..622db76dfd9b 100644
--- a/drivers/char/Makefile
+++ b/drivers/char/Makefile
@@ -43,3 +43,7 @@ obj-$(CONFIG_PS3_FLASH)		+= ps3flash.o
 obj-$(CONFIG_XILLYBUS_CLASS)	+= xillybus/
 obj-$(CONFIG_POWERNV_OP_PANEL)	+= powernv-op-panel.o
 obj-$(CONFIG_ADI)		+= adi.o
+
+#注意后面有个 / 符号
+obj-$(CONFIG_HELLO) += hello/
+
diff --git a/drivers/char/hello/Kconfig b/drivers/char/hello/Kconfig
new file mode 100644
index 000000000000..c47dd8504534
--- /dev/null
+++ b/drivers/char/hello/Kconfig
@@ -0,0 +1,6 @@
+config HELLO
+        tristate 'Create a my hello module'
+        default y
+        help
+                This is a module to print Hello World!
+
diff --git a/drivers/char/hello/Makefile b/drivers/char/hello/Makefile
new file mode 100644
index 000000000000..dce655b623c5
--- /dev/null
+++ b/drivers/char/hello/Makefile
@@ -0,0 +1,2 @@
+obj-$(CONFIG_HELLO) += hello.o
+
diff --git a/drivers/char/hello/hello.c b/drivers/char/hello/hello.c
new file mode 100644
index 000000000000..35a1619180b7
--- /dev/null
+++ b/drivers/char/hello/hello.c
@@ -0,0 +1,21 @@
+#include <linux/kernel.h>
+#include <linux/module.h>
+#include <linux/init.h>
+
+static int __init init_hello( void )
+{
+	printk("this is my first driver module:    Hello world!\n");
+	return 0;//必须返回0
+}
+
+static void __exit exit_hello( void )
+{
+	printk("this is my first driver module:    Goodbey world!\n");
+}
+
+module_init(init_hello);
+module_exit(exit_hello);
+
+MODULE_LICENSE("GPL");
+MODULE_AUTHOR("caodongwang");
+
